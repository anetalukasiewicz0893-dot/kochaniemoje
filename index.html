<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A & S</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,300;1,400;1,500;1,600&family=Outfit:wght@200;300;400;500;600;800&family=Allura&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg: #fffafa; --ink: #5c5252; --ink-muted: #a89a9a;
            --accent-a: rgba(220, 180, 230, 0.55); --accent-s: rgba(180, 210, 230, 0.55); 
            --rose: #e5989b; --card-bg: rgba(255, 255, 255, 0.4); --card-border: rgba(255, 255, 255, 0.7);
            --font-main: 'Outfit', sans-serif; --font-display: 'Cormorant Garamond', serif;
        }
        html, body { width: 100%; height: 100%; overflow: hidden; font-family: var(--font-main); background: var(--bg); color: var(--ink); }
        #pCanvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
        .page { position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; z-index: 10; visibility: hidden; opacity: 0; transition: opacity 0.6s ease; }
        .page.on { visibility: visible; opacity: 1; }
        .btn-pill { font-family: var(--font-main); font-weight: 500; text-transform: uppercase; letter-spacing: 1.5px; font-size: 10px; border: 1px solid var(--card-border); border-radius: 999px; cursor: pointer; transition: 0.3s; background: rgba(255, 255, 255, 0.4); backdrop-filter: blur(10px); color: var(--ink); padding: 12px 24px; }
        .nav { position: fixed; bottom: 0; left: 0; right: 0; z-index: 100; display: flex; justify-content: center; padding: 15px 16px calc(15px + env(safe-area-inset-bottom, 0px)); }
        .nav-pill { display: flex; gap: 4px; padding: 6px; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(25px); border: 1px solid var(--card-border); border-radius: 999px; }
        .nb { width: 50px; height: 44px; border: none; border-radius: 999px; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center; color: var(--ink-muted); }
        .nb.on { background: #fff; color: var(--rose); }
        .hc { display: flex; gap: 40px; margin-bottom: 20px; }
        .cn { font-family: var(--font-display); font-size: 64px; font-weight: 300; line-height: 1; color: var(--rose); }
        .ht { font-family: 'Allura', cursive; font-size: clamp(90px, 22vw, 150px); line-height: 0.9; color: var(--ink); }
        .qc { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 25px; padding: 50px; width: 100%; max-width: 380px; text-align: center; }
        .bb { position: absolute; max-width: 180px; padding: 14px; border-radius: 20px; font-size: 13px; animation: bf 20s infinite alternate ease-in-out; }
        .bb.bA { background: var(--accent-a); } .bb.bS { background: var(--accent-s); }
        @keyframes bf { 0%{transform:translate(0,0)} 100%{transform:translate(10px,-15px)} }
        .input-bar { position: absolute; bottom: 100px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px; width: 90%; max-width: 450px; }
        .auth-btn.active-A { background: var(--accent-a); } .auth-btn.active-S { background: var(--accent-s); }
        .mbg { position: fixed; inset: 0; z-index: 200; background: rgba(0, 0, 0, 0.1); backdrop-filter: blur(10px); display: none; align-items: center; justify-content: center; }
        .mbg.op { display: flex; }
    </style>
</head>
<body>
<canvas id="pCanvas"></canvas>
<section class="page on" id="pg-home">
    <div class="content-wrap">
        <div class="hc"><div class="cb"><div class="cn" id="cT">—</div></div><div class="cb"><div class="cn" id="cA">—</div></div></div>
        <h1 class="ht">A &amp; S</h1>
    </div>
</section>
<section class="page" id="pg-thoughts"><div id="tF" style="position:absolute; inset:0;"></div>
    <div class="input-bar">
        <button id="bA-t" onclick="pA('A')" class="auth-btn active-A">A</button>
        <button id="bS-t" onclick="pA('S')" class="auth-btn">S</button>
        <input type="text" id="tI" placeholder="Coś miłego?">
        <button onclick="sT()">↑</button>
    </div>
</section>
<section class="page" id="pg-whispers"><div id="wList" style="width:100%; overflow-y:auto; padding:20px;"></div>
    <div class="input-bar">
        <button id="bA-w" onclick="pA('A')" class="auth-btn active-A">A</button>
        <button id="bS-w" onclick="pA('S')" class="auth-btn">S</button>
        <input type="text" id="wI" placeholder="Sekret...">
        <button onclick="sW()">↑</button>
    </div>
</section>
<nav class="nav"><div class="nav-pill"><button class="nb on" onclick="go('home')">H</button><button class="nb" onclick="go('thoughts')">M</button><button class="nb" onclick="go('whispers')">S</button></div></nav>
<script>
var START='2024-12-23', APART='2026-01-29', au='A', cp='home';
async function sync() {
    try {
        const res = await fetch('/api/data'); const data = await res.json();
        const tF = document.getElementById('tF'); tF.innerHTML = '';
        data.thoughts.forEach(t => { 
            var el=document.createElement('div'); el.className='bb b'+t.a; 
            el.style.top=Math.random()*70+'%'; el.style.left=Math.random()*70+'%'; 
            el.innerHTML=t.t; tF.appendChild(el); 
        });
        const wL = document.getElementById('wList'); wL.innerHTML = '';
        data.whispers.forEach(w => {
            var el=document.createElement('div'); el.style.background='white'; el.style.margin='10px'; el.style.padding='15px';
            el.innerHTML = `${w.t} <button onclick="burnW('${w._id}')">X</button>`;
            wL.appendChild(el);
        });
    } catch(e) {}
}
async function sT() {
    var i=document.getElementById('tI'); if(!i.value) return;
    await fetch('/api/thoughts', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({t:i.value, a:au}) });
    i.value=''; sync();
}
async function sW() {
    var i=document.getElementById('wI'); if(!i.value) return;
    await fetch('/api/whispers', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({t:i.value, a:au}) });
    i.value=''; sync();
}
async function burnW(id) { await fetch('/api/whispers/'+id, {method:'DELETE'}); sync(); }
function go(n){ document.querySelectorAll('.page').forEach(p=>p.classList.remove('on')); document.getElementById('pg-'+n).classList.add('on'); }
function pA(a){ au=a; }
setInterval(sync, 5000); sync();
</script>
</body>
</html><!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A & S</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,300;1,400;1,500;1,600&family=Outfit:wght@200;300;400;500;600;800&family=Allura&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg: #fffafa; --ink: #5c5252; --ink-muted: #a89a9a;
            --accent-a: rgba(220, 180, 230, 0.55); --accent-s: rgba(180, 210, 230, 0.55); 
            --rose: #e5989b; --card-bg: rgba(255, 255, 255, 0.4); --card-border: rgba(255, 255, 255, 0.7);
            --font-main: 'Outfit', sans-serif; --font-display: 'Cormorant Garamond', serif;
        }
        html, body { width: 100%; height: 100%; overflow: hidden; font-family: var(--font-main); background: var(--bg); color: var(--ink); }
        #pCanvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
        .page { position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; z-index: 10; visibility: hidden; opacity: 0; transition: opacity 0.6s ease; }
        .page.on { visibility: visible; opacity: 1; }
        .btn-pill { font-family: var(--font-main); font-weight: 500; text-transform: uppercase; letter-spacing: 1.5px; font-size: 10px; border: 1px solid var(--card-border); border-radius: 999px; cursor: pointer; transition: 0.3s; background: rgba(255, 255, 255, 0.4); backdrop-filter: blur(10px); color: var(--ink); padding: 12px 24px; }
        .nav { position: fixed; bottom: 0; left: 0; right: 0; z-index: 100; display: flex; justify-content: center; padding: 15px 16px calc(15px + env(safe-area-inset-bottom, 0px)); }
        .nav-pill { display: flex; gap: 4px; padding: 6px; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(25px); border: 1px solid var(--card-border); border-radius: 999px; }
        .nb { width: 50px; height: 44px; border: none; border-radius: 999px; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center; color: var(--ink-muted); }
        .nb.on { background: #fff; color: var(--rose); }
        .hc { display: flex; gap: 40px; margin-bottom: 20px; }
        .cn { font-family: var(--font-display); font-size: 64px; font-weight: 300; line-height: 1; color: var(--rose); }
        .ht { font-family: 'Allura', cursive; font-size: clamp(90px, 22vw, 150px); line-height: 0.9; color: var(--ink); }
        .qc { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 25px; padding: 50px; width: 100%; max-width: 380px; text-align: center; }
        .bb { position: absolute; max-width: 180px; padding: 14px; border-radius: 20px; font-size: 13px; animation: bf 20s infinite alternate ease-in-out; }
        .bb.bA { background: var(--accent-a); } .bb.bS { background: var(--accent-s); }
        @keyframes bf { 0%{transform:translate(0,0)} 100%{transform:translate(10px,-15px)} }
        .input-bar { position: absolute; bottom: 100px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px; width: 90%; max-width: 450px; }
        .auth-btn.active-A { background: var(--accent-a); } .auth-btn.active-S { background: var(--accent-s); }
        .mbg { position: fixed; inset: 0; z-index: 200; background: rgba(0, 0, 0, 0.1); backdrop-filter: blur(10px); display: none; align-items: center; justify-content: center; }
        .mbg.op { display: flex; }
    </style>
</head>
<body>
<canvas id="pCanvas"></canvas>
<section class="page on" id="pg-home">
    <div class="content-wrap">
        <div class="hc"><div class="cb"><div class="cn" id="cT">—</div></div><div class="cb"><div class="cn" id="cA">—</div></div></div>
        <h1 class="ht">A &amp; S</h1>
    </div>
</section>
<section class="page" id="pg-thoughts"><div id="tF" style="position:absolute; inset:0;"></div>
    <div class="input-bar">
        <button id="bA-t" onclick="pA('A')" class="auth-btn active-A">A</button>
        <button id="bS-t" onclick="pA('S')" class="auth-btn">S</button>
        <input type="text" id="tI" placeholder="Coś miłego?">
        <button onclick="sT()">↑</button>
    </div>
</section>
<section class="page" id="pg-whispers"><div id="wList" style="width:100%; overflow-y:auto; padding:20px;"></div>
    <div class="input-bar">
        <button id="bA-w" onclick="pA('A')" class="auth-btn active-A">A</button>
        <button id="bS-w" onclick="pA('S')" class="auth-btn">S</button>
        <input type="text" id="wI" placeholder="Sekret...">
        <button onclick="sW()">↑</button>
    </div>
</section>
<nav class="nav"><div class="nav-pill"><button class="nb on" onclick="go('home')">H</button><button class="nb" onclick="go('thoughts')">M</button><button class="nb" onclick="go('whispers')">S</button></div></nav>
<script>
var START='2024-12-23', APART='2026-01-29', au='A', cp='home';
async function sync() {
    try {
        const res = await fetch('/api/data'); const data = await res.json();
        const tF = document.getElementById('tF'); tF.innerHTML = '';
        data.thoughts.forEach(t => { 
            var el=document.createElement('div'); el.className='bb b'+t.a; 
            el.style.top=Math.random()*70+'%'; el.style.left=Math.random()*70+'%'; 
            el.innerHTML=t.t; tF.appendChild(el); 
        });
        const wL = document.getElementById('wList'); wL.innerHTML = '';
        data.whispers.forEach(w => {
            var el=document.createElement('div'); el.style.background='white'; el.style.margin='10px'; el.style.padding='15px';
            el.innerHTML = `${w.t} <button onclick="burnW('${w._id}')">XXX</button>`;
            wL.appendChild(el);
        });
    } catch(e) {}
}
async function sT() {
    var i=document.getElementById('tI'); if(!i.value) return;
    await fetch('/api/thoughts', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({t:i.value, a:au}) });
    i.value=''; sync();
}
async function sW() {
    var i=document.getElementById('wI'); if(!i.value) return;
    await fetch('/api/whispers', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({t:i.value, a:au}) });
    i.value=''; sync();
}
async function burnW(id) { await fetch('/api/whispers/'+id, {method:'DELETE'}); sync(); }
function go(n){ document.querySelectorAll('.page').forEach(p=>p.classList.remove('on')); document.getElementById('pg-'+n).classList.add('on'); }
function pA(a){ au=a; }
setInterval(sync, 5000); sync();
</script>
</body>
</html>
